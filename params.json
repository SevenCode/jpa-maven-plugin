{"note":"Don't delete this file! It's used internally to help with page regeneration.","tagline":"A Maven 3 plugin for helping out with common JPA project needs.","name":"Jpa-maven-plugin","body":"jpa-maven-plugin\r\n================\r\n\r\nThis project houses a [Maven plugin][1] for performing various tasks\r\nto help with JPA-based projects.\r\n\r\n## Quick Start\r\n\r\nCreate a `persistence.xml` to be used for unit testing in\r\n`src/test/resources/META-INF`:\r\n\r\n    <?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n    <persistence version=\"2.0\"\r\n                 xmlns=\"http://java.sun.com/xml/ns/persistence\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\r\n                 xsi:schemaLocation=\"http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd\">\r\n      <persistence-unit name=\"test-Hibernate\" transaction-type=\"RESOURCE_LOCAL\">\r\n\r\n        <!-- This provider is just an example. -->\r\n        <provider>org.hibernate.ejb.HibernatePersistence</provider>\r\n\r\n        <!-- This is where the magic will happen. -->\r\n        <class>${entityClassnames}</class>\r\n\r\n        <properties>\r\n          <property name=\"javax.persistence.jdbc.driver\" value=\"TODO: JDBC driver class name goes here\" />\r\n          <property name=\"javax.persistence.jdbc.url\" value=\"TODO: JDBC connection URL for unit tests goes here\" />\r\n          <property name=\"javax.persistence.jdbc.user\" value=\"TODO: unit test database user goes here\" />\r\n          <property name=\"javax.persistence.jdbc.password\" value=\"TODO: unit test database password goes here\" />\r\n\r\n          <!-- You may of course put any properties you want here -->\r\n          <property name=\"hibernate.default_schema\" value=\"TODO: default test schema goes here\" />\r\n          <property name=\"hibernate.id.new_generator_mappings\" value=\"true\"/>\r\n          <property name=\"hibernate.show_sql\" value=\"true\" />\r\n          <property name=\"hibernate.format_sql\" value=\"true\" />\r\n        </properties>\r\n      </persistence-unit>\r\n    </persistence>\r\n\r\nEnsure that it does _not_ get copied during resource copying.  Add\r\nthis in your `pom.xml`'s `<build>` section:\r\n\r\n    <testResources>\r\n      <testResource>\r\n        <directory>src/test/resources</directory>\r\n        <excludes>\r\n          <exclude>META-INF/persistence.xml</exclude>\r\n        </excludes>\r\n        <!-- Whether you want to filter the other test resources is up to you -->\r\n        <filtering>true</filtering>\r\n      </testResource>\r\n    </testResources>\r\n\r\nNow set up the `jpa-maven-plugin`.  Place this in your `pom.xml`'s\r\n`<build>`'s `<plugins>` section:\r\n\r\n    <plugin>\r\n      <groupId>com.edugility</groupId>\r\n      <artifactId>jpa-maven-plugin</artifactId>\r\n      <version>1.1-SNAPSHOT</version>\r\n      <executions>\r\n        <execution>\r\n          <id>Generate entityClassnames.properties</id>\r\n          <goals>\r\n            <goal>list-entity-classnames</goal>\r\n          </goals>\r\n        </execution>\r\n      </executions>\r\n    </plugin>\r\n\r\nFinally, make sure that the `persistence.xml` is copied over, but only\r\nafter the `jpa-maven-plugin` has run.  Place this **IMMEDIATELY\r\nBELOW** the plugin stanza listed above:\r\n\r\n    <plugin>\r\n      <artifactId>maven-resources-plugin</artifactId>\r\n      <version>2.5</version>\r\n      <executions>\r\n        <execution>\r\n          <id>Copy persistence.xml filtered with generated entityClassnames.properties file</id>\r\n          <phase>process-test-classes</phase>\r\n          <goals>\r\n            <goal>copy-resources</goal>\r\n          </goals>\r\n          <configuration>\r\n            <filters>\r\n              <filter>${project.build.directory}/generated-test-sources/jpa-maven-plugin/entityClassnames.properties</filter>\r\n            </filters>\r\n            <outputDirectory>${project.build.testOutputDirectory}/META-INF</outputDirectory>\r\n            <resources>\r\n              <resource>\r\n                <filtering>true</filtering>\r\n                <directory>src/test/resources/META-INF</directory>\r\n                <includes>\r\n                  <include>persistence.xml</include>\r\n                </includes>\r\n              </resource>\r\n            </resources>\r\n          </configuration>\r\n        </execution>\r\n      </executions>\r\n    </plugin>\r\n\r\nRun `mvn clean process-test-classes` if you just want to see the\r\neffects of the `jpa-maven-plugin`.  Look in your\r\n`target/test-classes/META-INF` directory.  You will see a\r\n`persistence.xml` file with all of your entity and mapped superclass\r\nand embeddables and id classes listed.  Any Maven lifecycle phases\r\nthat occur before `process-test-classes` will not be able to use the\r\neffects of the `jpa-maven-plugin`.\r\n\r\n## More Information\r\n\r\nFor more information, grab the source to this project, and from the root directory run:\r\n\r\n    mvn clean install site\r\n\r\nFull documentation will be available at `target/site/index.html`.\r\n\r\n[1]: http://maven.apache.org/guides/plugin/guide-java-plugin-development.html\r\n","google":""}